require=function e(t,o,n){function i(a,u){if(!o[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=o[a]={exports:{}};t[a][0].call(d.exports,function(e){var o=t[a][1][e];return i(o||e)},d,d.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,o){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0}),o.DataModel=void 0;var r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),a=e("sd-utils"),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(e("./domain")),s=e("./validation-result");o.DataModel=function(){function e(t){i(this,e),this.nodes=[],this.edges=[],this.texts=[],this.payoffNames=[],this.defaultCriterion1Weight=1,this.weightLowerBound=0,this.weightUpperBound=1/0,this.expressionScope={},this.code="",this.$codeError=null,this.$codeDirty=!1,this.$version=1,this.validationResults=[],this.maxStackSize=20,this.undoStack=[],this.redoStack=[],this.undoRedoStateChangedCallback=null,this.nodeAddedCallback=null,this.nodeRemovedCallback=null,this.textAddedCallback=null,this.textRemovedCallback=null,this.callbacksDisabled=!1,t&&this.load(t)}return r(e,[{key:"getJsonReplacer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(i,r){if(!(n&&a.Utils.startsWith(i,"$")||"parentNode"==i||e&&"location"==i||t&&"computed"==i))return o?o(i,r):r}}},{key:"serialize",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r={code:this.code,expressionScope:this.expressionScope,trees:this.getRoots(),texts:this.texts,payoffNames:this.payoffNames.slice(),defaultCriterion1Weight:this.defaultCriterion1Weight,weightLowerBound:this.weightLowerBound,weightUpperBound:this.weightUpperBound};return e?a.Utils.stringify(r,this.getJsonReplacer(t,o,n,i),[]):r}},{key:"load",value:function(e){var t=this,o=this.callbacksDisabled;this.callbacksDisabled=!0,this.clear(),e.trees.forEach(function(e){t.createNodeFromData(e)}),e.texts&&e.texts.forEach(function(e){var o=new u.Point(e.location.x,e.location.y),n=new u.Text(o,e.value);t.texts.push(n)}),this.clearExpressionScope(),this.code=e.code||"",e.expressionScope&&a.Utils.extend(this.expressionScope,e.expressionScope),void 0!==e.payoffNames&&null!==e.payoffNames&&(this.payoffNames=e.payoffNames),void 0!==e.defaultCriterion1Weight&&null!==e.defaultCriterion1Weight&&(this.defaultCriterion1Weight=e.defaultCriterion1Weight),void 0!==e.weightLowerBound&&null!==e.weightLowerBound&&(this.weightLowerBound=e.weightLowerBound),void 0!==e.weightUpperBound&&null!==e.weightUpperBound&&(this.weightUpperBound=e.weightUpperBound),this.callbacksDisabled=o}},{key:"getDTO",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{serializedData:this.serialize(!0,e,t,null,o),$codeError:this.$codeError,$codeDirty:this.$codeDirty,validationResults:this.validationResults.slice()}}},{key:"loadFromDTO",value:function(e,t){var o=this;this.load(JSON.parse(e.serializedData,t)),this.$codeError=e.$codeError,this.$codeDirty=e.$codeDirty,this.validationResults.length=0,e.validationResults.forEach(function(e){o.validationResults.push(s.ValidationResult.createFromDTO(e))})}},{key:"updateFrom",value:function(e){if(this.$version>e.$version)a.log.warn("DataModel.updateFrom: version of current model greater than update");else{var t={};e.nodes.forEach(function(e){t[e.$id]=e}),this.nodes.forEach(function(e,o){t[e.$id]&&e.loadComputedValues(t[e.$id].computed)}),e.edges.forEach(function(e){t[e.$id]=e}),this.edges.forEach(function(e,o){t[e.$id]&&e.loadComputedValues(t[e.$id].computed)}),this.expressionScope=e.expressionScope,this.$codeError=e.$codeError,this.$codeDirty=e.$codeDirty,this.validationResults=e.validationResults}}},{key:"getGlobalVariableNames",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=[];return a.Utils.forOwn(this.expressionScope,function(o,n){e&&a.Utils.isFunction(o)||t.push(n)}),t}},{key:"createNodeFromData",value:function(e,t){var o,n,i=this;n=e.location?new u.Point(e.location.x,e.location.y):new u.Point(0,0),u.DecisionNode.$TYPE==e.type?o=new u.DecisionNode(n):u.ChanceNode.$TYPE==e.type?o=new u.ChanceNode(n):u.TerminalNode.$TYPE==e.type&&(o=new u.TerminalNode(n)),e.$id&&(o.$id=e.$id),e.$fieldStatus&&(o.$fieldStatus=e.$fieldStatus),o.name=e.name,e.code&&(o.code=e.code),e.expressionScope&&(o.expressionScope=e.expressionScope),e.computed&&o.loadComputedValues(e.computed),o.folded=!!e.folded;var r=this.addNode(o,t);return e.childEdges.forEach(function(e){var t=i.createNodeFromData(e.childNode,o);a.Utils.isArray(e.payoff)?t.payoff=e.payoff:t.payoff=[e.payoff,0],t.probability=e.probability,t.name=e.name,e.computed&&t.loadComputedValues(e.computed),e.$id&&(t.$id=e.$id),e.$fieldStatus&&(t.$fieldStatus=e.$fieldStatus)}),r}},{key:"addNode",value:function(e,t){var o=this;if(o.nodes.push(e),t){var n=o._addChild(t,e);return this._fireNodeAddedCallback(e),n}return this._fireNodeAddedCallback(e),e}},{key:"injectNode",value:function(e,t){var o=t.parentNode,n=t.childNode;this.nodes.push(e),e.$parent=o,t.childNode=e,this._addChild(e,n),this._fireNodeAddedCallback(e)}},{key:"_addChild",value:function(e,t){var o=this,n=new u.Edge(e,t);return o._setEdgeInitialProbability(n),o.edges.push(n),e.childEdges.push(n),t.$parent=e,n}},{key:"_setEdgeInitialProbability",value:function(e){e.parentNode instanceof u.ChanceNode?e.probability="#":e.probability=void 0}},{key:"removeNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this;e.childEdges.forEach(function(e){return o.removeNode(e.childNode,t+1)}),o._removeNode(e);var n=e.$parent;if(n){var i=a.Utils.find(n.childEdges,function(t,o){return t.childNode===e});0==t?o.removeEdge(i):o._removeEdge(i)}this._fireNodeRemovedCallback(e)}},{key:"removeNodes",value:function(e){var t=this;this.findSubtreeRoots(e).forEach(function(e){return t.removeNode(e,0)},this)}},{key:"convertNode",value:function(e,t){var o,n=this;!e.childEdges.length&&e.$parent?o=this.createNodeByType(t,e.location):e instanceof u.DecisionNode&&t==u.ChanceNode.$TYPE?o=this.createNodeByType(t,e.location):t==u.DecisionNode.$TYPE&&(o=this.createNodeByType(t,e.location)),o&&(o.name=e.name,this.replaceNode(o,e),o.childEdges.forEach(function(e){return n._setEdgeInitialProbability(e)}),this._fireNodeAddedCallback(o))}},{key:"createNodeByType",value:function(e,t){return e==u.DecisionNode.$TYPE?new u.DecisionNode(t):e==u.ChanceNode.$TYPE?new u.ChanceNode(t):e==u.TerminalNode.$TYPE?new u.TerminalNode(t):void 0}},{key:"replaceNode",value:function(e,t){var o=t.$parent;e.$parent=o,o&&(a.Utils.find(e.$parent.childEdges,function(e){return e.childNode===t}).childNode=e),e.childEdges=t.childEdges,e.childEdges.forEach(function(t){return t.parentNode=e});var n=this.nodes.indexOf(t);~n&&(this.nodes[n]=e)}},{key:"getRoots",value:function(){return this.nodes.filter(function(e){return!e.$parent})}},{key:"findSubtreeRoots",value:function(e){return e.filter(function(t){return!t.$parent||-1===e.indexOf(t.$parent)})}},{key:"cloneSubtree",value:function(e,t){var o=this,n=this.cloneNode(e);return e.childEdges.forEach(function(e){var i=o.cloneSubtree(e.childNode,t);i.$parent=n;var r=a.Utils.clone(e);r.$id=a.Utils.guid(),r.parentNode=n,r.childNode=i,r.payoff=a.Utils.cloneDeep(e.payoff),r.computed={},t&&(r.computed=a.Utils.cloneDeep(e.computed),i.computed=a.Utils.cloneDeep(e.childNode.computed)),n.childEdges.push(r)}),t&&(n.computed=a.Utils.cloneDeep(e.computed)),n}},{key:"attachSubtree",value:function(e,t){var o=this,n=o.addNode(e,t);return e.expressionScope=null,o.getAllDescendantEdges(e).forEach(function(e){o.edges.push(e),o.nodes.push(e.childNode),e.childNode.expressionScope=null}),n}},{key:"cloneNodes",value:function(e){}},{key:"cloneNode",value:function(e){var t=a.Utils.clone(e);return t.$id=a.Utils.guid(),t.location=a.Utils.clone(e.location),t.computed=a.Utils.clone(e.computed),t.$parent=null,t.childEdges=[],t}},{key:"findNodeById",value:function(e){return a.Utils.find(this.nodes,function(t){return t.$id==e})}},{key:"findEdgeById",value:function(e){return a.Utils.find(this.edges,function(t){return t.$id==e})}},{key:"findById",value:function(e){var t=this.findNodeById(e);return t||this.findEdgeById(e)}},{key:"_removeNode",value:function(e){var t=this.nodes.indexOf(e);t>-1&&this.nodes.splice(t,1)}},{key:"removeEdge",value:function(e){var t=e.parentNode.childEdges.indexOf(e);t>-1&&e.parentNode.childEdges.splice(t,1),this._removeEdge(e)}},{key:"_removeEdge",value:function(e){var t=this.edges.indexOf(e);t>-1&&this.edges.splice(t,1)}},{key:"_removeNodes",value:function(e){this.nodes=this.nodes.filter(function(t){return-1===e.indexOf(t)})}},{key:"_removeEdges",value:function(e){this.edges=this.edges.filter(function(t){return-1===e.indexOf(t)})}},{key:"getAllDescendantEdges",value:function(e){var t=this,o=[];return e.childEdges.forEach(function(e){o.push(e),e.childNode&&o.push.apply(o,n(t.getAllDescendantEdges(e.childNode)))}),o}},{key:"getAllDescendantNodes",value:function(e){var t=this,o=[];return e.childEdges.forEach(function(e){e.childNode&&(o.push(e.childNode),o.push.apply(o,n(t.getAllDescendantNodes(e.childNode))))}),o}},{key:"getAllNodesInSubtree",value:function(e){var t=this.getAllDescendantNodes(e);return t.unshift(e),t}},{key:"isUndoAvailable",value:function(){return!!this.undoStack.length}},{key:"isRedoAvailable",value:function(){return!!this.redoStack.length}},{key:"createStateSnapshot",value:function(e){return{revertConf:e,nodes:a.Utils.cloneDeep(this.nodes),edges:a.Utils.cloneDeep(this.edges),texts:a.Utils.cloneDeep(this.texts),payoffNames:a.Utils.cloneDeep(this.payoffNames),defaultCriterion1Weight:a.Utils.cloneDeep(this.defaultCriterion1Weight),weightLowerBound:a.Utils.cloneDeep(this.weightLowerBound),weightUpperBound:a.Utils.cloneDeep(this.weightUpperBound),expressionScope:a.Utils.cloneDeep(this.expressionScope),code:this.code,$codeError:this.$codeError}}},{key:"saveStateFromSnapshot",value:function(e){return this.redoStack.length=0,this._pushToStack(this.undoStack,e),this._fireUndoRedoCallback(),this}},{key:"saveState",value:function(e){return this.saveStateFromSnapshot(this.createStateSnapshot(e)),this}},{key:"undo",value:function(){var e=this,t=this.undoStack.pop();if(t)return this._pushToStack(this.redoStack,{revertConf:t.revertConf,nodes:e.nodes,edges:e.edges,texts:e.texts,payoffNames:e.payoffNames,defaultCriterion1Weight:e.defaultCriterion1Weight,weightLowerBound:e.weightLowerBound,weightUpperBound:e.weightUpperBound,expressionScope:e.expressionScope,code:e.code,$codeError:e.$codeError}),this._setNewState(t),this._fireUndoRedoCallback(),this}},{key:"redo",value:function(){var e=this,t=this.redoStack.pop();if(t)return this._pushToStack(this.undoStack,{revertConf:t.revertConf,nodes:e.nodes,edges:e.edges,texts:e.texts,payoffNames:e.payoffNames,defaultCriterion1Weight:e.defaultCriterion1Weight,weightLowerBound:e.weightLowerBound,weightUpperBound:e.weightUpperBound,expressionScope:e.expressionScope,code:e.code,$codeError:e.$codeError}),this._setNewState(t,!0),this._fireUndoRedoCallback(),this}},{key:"clear",value:function(){this.nodes.length=0,this.edges.length=0,this.undoStack.length=0,this.redoStack.length=0,this.texts.length=0,this.clearExpressionScope(),this.code="",this.$codeError=null,this.$codeDirty=!1,this.payoffNames=[],this.defaultCriterion1Weight=1,this.weightLowerBound=0,this.weightUpperBound=1/0}},{key:"clearComputedValues",value:function(){this.nodes.forEach(function(e){return e.clearComputedValues()}),this.edges.forEach(function(e){return e.clearComputedValues()})}},{key:"addText",value:function(e){this.texts.push(e),this._fireTextAddedCallback(e)}},{key:"removeTexts",value:function(e){var t=this;e.forEach(function(e){return t.removeText(e)})}},{key:"removeText",value:function(e){var t=this.texts.indexOf(e);t>-1&&(this.texts.splice(t,1),this._fireTextRemovedCallback(e))}},{key:"clearExpressionScope",value:function(){var e=this;a.Utils.forOwn(this.expressionScope,function(t,o){delete e.expressionScope[o]})}},{key:"reversePayoffs",value:function(){this.payoffNames.reverse(),this.edges.forEach(function(e){return e.payoff.reverse()})}},{key:"_setNewState",value:function(e,t){var o=a.Utils.getObjectByIdMap(e.nodes),n=a.Utils.getObjectByIdMap(e.edges);this.nodes=e.nodes,this.edges=e.edges,this.texts=e.texts,this.payoffNames=e.payoffNames,this.defaultCriterion1Weight=e.defaultCriterion1Weight,this.weightLowerBound=e.weightLowerBound,this.weightUpperBound=e.weightUpperBound,this.expressionScope=e.expressionScope,this.code=e.code,this.$codeError=e.$codeError,this.nodes.forEach(function(e){for(var t=0;t<e.childEdges.length;t++){var i=n[e.childEdges[t].$id];e.childEdges[t]=i,i.parentNode=e,i.childNode=o[i.childNode.$id]}}),e.revertConf&&(!t&&e.revertConf.onUndo&&e.revertConf.onUndo(e.revertConf.data),t&&e.revertConf.onRedo&&e.revertConf.onRedo(e.revertConf.data)),this.revertConf=e.revertConf}},{key:"_pushToStack",value:function(e,t){e.length>=this.maxStackSize&&e.shift(),e.push(t)}},{key:"_fireUndoRedoCallback",value:function(){!this.callbacksDisabled&&this.undoRedoStateChangedCallback&&this.undoRedoStateChangedCallback()}},{key:"_fireNodeAddedCallback",value:function(e){!this.callbacksDisabled&&this.nodeAddedCallback&&this.nodeAddedCallback(e)}},{key:"_fireNodeRemovedCallback",value:function(e){!this.callbacksDisabled&&this.nodeRemovedCallback&&this.nodeRemovedCallback(e)}},{key:"_fireTextAddedCallback",value:function(e){!this.callbacksDisabled&&this.textAddedCallback&&this.textAddedCallback(e)}},{key:"_fireTextRemovedCallback",value:function(e){!this.callbacksDisabled&&this.textRemovedCallback&&this.textRemovedCallback(e)}}]),e}()},{"./domain":3,"./validation-result":13,"sd-utils":"sd-utils"}],2:[function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(o,"__esModule",{value:!0}),o.Edge=void 0;var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),s=e("./object-with-computed-values");o.Edge=function(e){function t(e,o,r,a,u){n(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.name="",s.probability=void 0,s.payoff=[0,0],s.$DISPLAY_VALUE_NAMES=["probability","payoff","optimal"],s.parentNode=e,s.childNode=o,void 0!==r&&(s.name=r),void 0!==u&&(s.probability=u),void 0!==a&&(s.payoff=a),s}return r(t,s.ObjectWithComputedValues),u(t,[{key:"setName",value:function(e){return this.name=e,this}},{key:"setProbability",value:function(e){return this.probability=e,this}},{key:"setPayoff",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.payoff[t]=e,this}},{key:"computedBaseProbability",value:function(e){return this.computedValue(null,"probability",e)}},{key:"computedBasePayoff",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.computedValue(null,"payoff["+t+"]",e)}},{key:"displayProbability",value:function(e){return this.displayValue("probability",e)}},{key:"displayPayoff",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.displayValue("payoff["+t+"]",e)}}]),t}()},{"./object-with-computed-values":8}],3:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("./node/node");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(o,e,{enumerable:!0,get:function(){return n[e]}})});var i=e("./node/decision-node");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(o,e,{enumerable:!0,get:function(){return i[e]}})});var r=e("./node/chance-node");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(o,e,{enumerable:!0,get:function(){return r[e]}})});var a=e("./node/terminal-node");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(o,e,{enumerable:!0,get:function(){return a[e]}})});var u=e("./edge");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(o,e,{enumerable:!0,get:function(){return u[e]}})});var s=e("./point");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(o,e,{enumerable:!0,get:function(){return s[e]}})});var l=e("./text");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(o,e,{enumerable:!0,get:function(){return l[e]}})})},{"./edge":2,"./node/chance-node":4,"./node/decision-node":5,"./node/node":6,"./node/terminal-node":7,"./point":10,"./text":11}],4:[function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(o,"__esModule",{value:!0}),o.ChanceNode=void 0;var u=e("./node");(o.ChanceNode=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.$TYPE,e))}return r(t,u.Node),t}()).$TYPE="chance"},{"./node":6}],5:[function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(o,"__esModule",{value:!0}),o.DecisionNode=void 0;var u=e("./node");(o.DecisionNode=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.$TYPE,e))}return r(t,u.Node),t}()).$TYPE="decision"},{"./node":6}],6:[function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(o,"__esModule",{value:!0}),o.Node=void 0;var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),s=e("../point"),l=e("../object-with-computed-values");o.Node=function(e){function t(e,o){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.childEdges=[],r.name="",r.code="",r.$codeDirty=!1,r.$codeError=null,r.expressionScope=null,r.folded=!1,r.$DISPLAY_VALUE_NAMES=["childrenPayoff","aggregatedPayoff","probabilityToEnter","optimal"],r.location=o,o||(r.location=new s.Point(0,0)),r.type=e,r}return r(t,l.ObjectWithComputedValues),u(t,[{key:"setName",value:function(e){return this.name=e,this}},{key:"moveTo",value:function(e,t,o){if(o){var n=e-this.location.x,i=t-this.location.y;this.childEdges.forEach(function(e){return e.childNode.move(n,i,!0)})}return this.location.moveTo(e,t),this}},{key:"move",value:function(e,t,o){return o&&this.childEdges.forEach(function(o){return o.childNode.move(e,t,!0)}),this.location.move(e,t),this}}]),t}()},{"../object-with-computed-values":8,"../point":10}],7:[function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(o,"__esModule",{value:!0}),o.TerminalNode=void 0;var u=e("./node");(o.TerminalNode=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.$TYPE,e))}return r(t,u.Node),t}()).$TYPE="terminal"},{"./node":6}],8:[function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(o,"__esModule",{value:!0}),o.ObjectWithComputedValues=void 0;var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),s=e("sd-utils"),l=e("./object-with-id-and-editable-fields");o.ObjectWithComputedValues=function(e){function t(){var e,o,r,a;n(this,t);for(var u=arguments.length,s=Array(u),l=0;l<u;l++)s[l]=arguments[l];return o=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.computed={},a=o,i(r,a)}return r(t,l.ObjectWithIdAndEditableFields),u(t,[{key:"computedValue",value:function(e,t,o){var n="computed.";return e&&(n+=e+"."),n+=t,void 0===o?s.Utils.get(this,n,null):(s.Utils.set(this,n,o),o)}},{key:"clearComputedValues",value:function(e){var t=this;void 0!=e?s.Utils.isArray(e)?e.forEach(function(e){t.computed[e]={}}):this.computed[e]={}:this.computed={}}},{key:"clearDisplayValues",value:function(){this.computed.$displayValues={}}},{key:"displayValue",value:function(e,t){return this.computedValue(null,"$displayValues."+e,t)}},{key:"loadComputedValues",value:function(e){this.computed=s.Utils.cloneDeep(e)}}]),t}()},{"./object-with-id-and-editable-fields":9,"sd-utils":"sd-utils"}],9:[function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0}),o.ObjectWithIdAndEditableFields=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=e("sd-utils");o.ObjectWithIdAndEditableFields=function(){function e(){n(this,e),this.$id=r.Utils.guid(),this.$fieldStatus={}}return i(e,[{key:"getFieldStatus",value:function(e){return r.Utils.get(this.$fieldStatus,e,null)||r.Utils.set(this.$fieldStatus,e,{valid:{syntax:!0,value:!0}}),r.Utils.get(this.$fieldStatus,e)}},{key:"setSyntaxValidity",value:function(e,t){this.getFieldStatus(e).valid.syntax=t}},{key:"setValueValidity",value:function(e,t){this.getFieldStatus(e).valid.value=t}},{key:"isFieldValid",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.getFieldStatus(e);return t&&o?n.valid.syntax&&n.valid.value:t?n.valid.syntax:n.valid.value}}]),e}()},{"sd-utils":"sd-utils"}],10:[function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();o.Point=function(){function e(t,o){n(this,e),t instanceof e?(o=t.y,t=t.x):Array.isArray(t)&&(o=t[1],t=t[0]),this.x=t,this.y=o}return i(e,[{key:"moveTo",value:function(e,t){return Array.isArray(e)&&(t=e[1],e=e[0]),this.x=e,this.y=t,this}},{key:"move",value:function(e,t){return Array.isArray(e)&&(t=e[1],e=e[0]),this.x+=e,this.y+=t,this}}]),e}()},{}],11:[function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(o,"__esModule",{value:!0}),o.Text=void 0;var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),s=e("./point"),l=(e("sd-utils"),e("./object-with-id-and-editable-fields"));o.Text=function(e){function t(e,o){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.value="",r.location=e,e||(r.location=new s.Point(0,0)),o&&(r.value=o),r}return r(t,l.ObjectWithIdAndEditableFields),u(t,[{key:"moveTo",value:function(e,t){return this.location.moveTo(e,t),this}},{key:"move",value:function(e,t){return this.location.move(e,t),this}}]),t}()},{"./object-with-id-and-editable-fields":9,"./point":10,"sd-utils":"sd-utils"}],12:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.domain=void 0;var n=e("./data-model");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(o,e,{enumerable:!0,get:function(){return n[e]}})});var i=e("./validation-result");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(o,e,{enumerable:!0,get:function(){return i[e]}})});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(e("./domain"));o.domain=r},{"./data-model":1,"./domain":3,"./validation-result":13}],13:[function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0}),o.ValidationResult=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=e("sd-utils");o.ValidationResult=function(){function e(){n(this,e),this.errors={},this.warnings={},this.objectIdToError={}}return i(e,[{key:"addError",value:function(e,t){r.Utils.isString(e)&&(e={name:e});var o=e.name,n=this.errors[o];n||(n=[],this.errors[o]=n);var i=this.objectIdToError[t.$id];i||(i=[],this.objectIdToError[t.$id]=i),n.push(t),i.push(e)}},{key:"addWarning",value:function(e,t){var o=this.warnings[e];o||(o=[],this.warnings[e]=o),o.push(t)}},{key:"isValid",value:function(){return 0===Object.getOwnPropertyNames(this.errors).length}}],[{key:"createFromDTO",value:function(t){var o=new e;return o.errors=t.errors,o.warnings=t.warnings,o.objectIdToError=t.objectIdToError,o}}]),e}()},{"sd-utils":"sd-utils"}],"sd-model":[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("./src/index");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(o,e,{enumerable:!0,get:function(){return n[e]}})})},{"./src/index":12}]},{},[]);
//# sourceMappingURL=sd-model.min.js.map
